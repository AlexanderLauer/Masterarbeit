\subsection{potentially minimal improving rules}
%
%\begin{definition}[\textbf{potentially minimal improving rule}]
%Let a plain rule $r = L \xhookleftarrow{l} K \xhookrightarrow{r} R$ be given.
%
%Let $E$ be the set of all existentially bound graphs and $U$ be the set of all universally bound graphs $C_j$ of $c$ with $j \leq k$. 
%The rule $r$ is called \emph{potentially minimal improving} at layer $k$, if
%$$(L \setminus K) \cap \bigcup_{C_j \in E} C_j\setminus C_{j-1} = \emptyset$$
%and $$(R \setminus K) \cap \bigcup_{C_j \in U} C_j\setminus C_{j-1} = \emptyset$$ 
%and either
%	$$(L \setminus K) \cap (C_{k+1} \setminus C_k) \neq \emptyset$$
%or 
%$$(R \setminus K) \cap (C_{k+2} \setminus C') \neq \emptyset$$
%\end{definition}
%
%
%\begin{definition}[\textbf{appl. conditions for potentially minimal improving rules}]
%Let a graph $G$, a constraint $c$, with $G \models \parcond(k,c,C')$ and $G \not \models_j c$ for all $j >k$, and a potentially minimal improving rule  $r = L \xhookleftarrow{l} K \xhookrightarrow{r} R$ be given.
%
%$$\ap(k, C) := \bigvee_{P \in \overlay(L, C_{k+1})} \exists(L \inj P, \neg \exists(P \inj Q, \true))$$
%
%$$\ap(k,C) :=  \bigvee_{P \in \overlay(L, C_{k+1})} \exists(L \inj P, \neg \exists(P \inj Q, \true)) \wedge \shift(\exists(R \inj Q', \true),r)$$
%
%
%
%\end{definition}

\begin{definition}[\textbf{potentially minimal improving rule}]
Let a constraint $c$, and a plain rule $r = L \xhookleftarrow{l} K \xhookrightarrow{r} R$ be given.
Let $E$ be the set of all existentially bound graphs and $U$ be the set of all universally bound graphs $C_j$ of $c$ with $j \leq k$. 
The rule $r$ is called \emph{potentially minimal improving} at layer $k$ with $C_k \subseteq C \subseteq C_{k+1}$, if
$$(L \setminus K) \cap \bigcup_{C_j \in E} C_j\setminus C_{j-1} = \emptyset$$
and 
$$(R \setminus K) \cap \bigcup_{C_j \in U} C_j\setminus C_{j-1} = \emptyset$$ 
and either \ref{pot_min_impr_1} or \ref{pot_min_impr_2} applies. 

\begin{enumerate}
\item \label{pot_min_impr_1}
	$$ L \subseteq C_{k}$$ with $(L \setminus K)\cap (C_{k} \setminus C_{k-1}) \neq \emptyset$
\item \label{pot_min_impr_2}
	 $$C' \subseteq R$$ with $(R \setminus K) \cap (C_{k+1} \setminus C') \neq \emptyset$ and $C_{k-1} \subseteq C \subseteq C' \subseteq C_{k}$.
If \ref{pot_min_impr_1} applies, $r$ is called a \emph{deleting potentially improving rule}.
If \ref{pot_min_impr_2} applies, $r$ is called an \emph{inserting potentially improving rule}.
\end{enumerate}


\end{definition}



\begin{definition}[\textbf{appl. conditions for potentially minimal improving rules}]
Let a constraint $c$ in EANF and a potentially minimal improving rule  $r = L \xhookleftarrow{l} K \xhookrightarrow{r} R$  at layer $k$  with $C$ be given. 

$$\ap(j, C) := \begin{cases}
				\exists\bigl(L \inj C_k, \neg \exists(C_k \inj C, \true)\bigr) &\text{, if j = k} \\
				\false &\text{, if } j \neq k
				\end{cases}$$

\end{definition}

\begin{lemma}
Let a graph $G$, a constraint $c$ with $G \models \parcond(k,c,C')$ and $G\not \models_j c$ for all $j>k$ and a potentially minimal improving rule $r = L \xhookleftarrow{l} K \xhookrightarrow{r} R$ at layer $k$ with $C'$ be given. 
Then, every 
\end{lemma}
\begin{lemma}
Let a constraint $c$ and a potentially minimal improving rule $r = L \xhookleftarrow{l} K \xhookrightarrow{r} R$ at layer $k$ with $C$ be given. 
The, the rule $r' = (r, \ap(k,C))$ is a direct minimal consistency improving rule. 
\end{lemma}
\begin{proof}
Let $G$ be a graph with $G \models_k c$ and $G \not \models_j c$ for all $j > k$ and let $G \Rightarrow_{r', m} H$ be a transformation. 
Since $r$ is a potentially improving rule, $r$ cannot destroy any occurrences of existentially bound graphs $C_j$ with $j \leq k+1$ and cannot create any new occurrences of universally bound graphs $C_j$ with $j \leq k$. 
Hence, $H \models_k c$ and equation (\ref{direct_improving_1}) is satisfied. 
Since $G \models_k c$ and $\ap(k,C)$ has been evaluated to $\true$, equation (\ref{direct_improving_2}) is also satisfied.
\end{proof}

\begin{definition}[\textbf{repairing rule set}]
Let a constraint $c$ in EANF and a set of rules $\mathcal{R}$ be given. 
Then, $\mathcal{R}$ is called a \emph{repairing rule set} if for all graphs $G$ a sequence 
$$G = G_0 \Rightarrow_{r_0} \ldots \Rightarrow_{r_{n-1}} G_n = H$$
exists, such that $r_j \in \mathcal{R}$ for all $j \in \{0,\ldots, n-1\}$ and $H \models c$. 

\end{definition}

\begin{lemma}
Let a constraint $c$ in EANF w and a set of rules $\mathcal{R}$ be given. 
Then $\mathcal{R}$ is a repairing set for $c$ if either \ref{categories_repair_set_1}. applies for every layer of $c$ or \ref{categories_repair_set_2}. applies.
\begin{enumerate}
\item \label{categories_repair_set_1}
Let $C_j$ be a existentially bound graph of $c$.
A set of graphs $$C_{k-1} \subset C_0' \subset \ldots \subset C_n' = C_k$$ exists, such that $\mathcal{R}$ contains a inserting potentially minimal improving rule at layer $j$ with $C_{\ell}$ with $\ell = 0, \ldots n$.
\item \label{categories_repair_set_2}For one universally bound graph $C_j$ of $c$, $\mathcal{R}$ contains a deleting potentially minimal improving rule and for every existentially bound graph $C_{\ell}$ with $\ell < k$ \ref{categories_repair_set_1} applies. 
\end{enumerate}
\end{lemma}
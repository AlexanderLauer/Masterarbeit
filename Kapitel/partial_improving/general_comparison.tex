\subsection{Comparison with other concepts of Consistency}\label{comp_general}
In this chapter, the notions of (direct) consistency increase- and maintainment are compared to the already known concepts of consistency guaranteeing, consistency preserving \cite{habel2009correctness}, (direct) consistency increasing and sustaining \cite{kosiol2022sustaining} in order to reveal relationships between them and ensure that (direct) consistency increase- and 
maintainment are indeed a new notions of consistency. 
These relations are displayed in Figure \ref{fig:consistency_relations}.

\input{figures/consistency_relations}

First, we compare (direct) consistency increase- and maintainment with the notions of consistency-guaranteeing and -preserving.
We start by showing that consistency maintaining implies preserving but the backwards implication does not hold.

\begin{lemma}\label{comparision:maintaining_preserving}
	Let a constraint $c$ in UANF, graphs $G$ and $H$ and a transformation 
	$t: G\Longrightarrow H$ be given. Then, 
	\begin{alignat*}{3}
			&t \text{ is maintaining w.r.t. $c$} && \implies \text{$t$ is 
			$c$-preserving} & \text{ and}\\
			&t \text{ $c$-preserving} && \centernot\implies \text{$t$ is 
			maintaining 	w.r.t. $c$} & \text{ }\\	
	\end{alignat*}
\end{lemma}
\begin{proof}
	\begin{enumerate}
		\item 
			Let $t$ be a consistency maintaining transformation w.r.t. $c$. 
			If $G \not \models c$, $t$ is a $c$-preserving transformation.
			If $G \models c$, it holds that $\nv{j}{G} = 0$ for all 
			$0 \leq j < \nlvl(c)$. Since $t$ is consistency maintaining
			it follows that $\nv{j}{H} = 0$ for all 
			$0 \leq j < \nlvl(c)$ and therefore $H \models c$. 
			It follows that $t$ is a $c$-preserving transformation.
			
		\item	
			Consider graphs $C_1^1$, $C_2^2$ and constraint $c_1$ given in 
			Figure \ref{fig:constraints}. Then, the transformation
			$t: C_2^2 \Longrightarrow C_1^1$ is $c$-preserving, since 
			$C_2^2 \not \models c_1$, but not consistency maintaining
			w.r.t. $c$ since $\nv{0}{C_2^2} = 2$ and $\nv{0}{C_1^1} = 5$.  
	\end{enumerate}
\end{proof}

Obviously, guaranteeing implies consistency maintaining, since this property is embedded in the definition of consistency maintainment. 
The inversion of this implication does not holds, since maintaining is a way stricter notion, in the sense, that the number of removed violations has to be greater or equal than the number of introduced violations.
For guaranteeing transformations this is not the case, an arbitrary number of violations can be inserted, as long as the derived graph satisfies the constraint and therefore guaranteeing does not imply direct increasing, since a direct increasing transformations is not allowed to introduce any new violations.

\begin{lemma}
	Let a constraint $c$ in UANF, graphs $G$ and $H$ and a transformation 
	$t: G \Longrightarrow H$ be given. Then,
	\begin{alignat*}{3}
		&t \text{ is $c$-guaranteeing} &&\implies t \text{ is maintaining w.r.t 
		$c$} &\text{ and} \\
		&t \text{ is $c$-guaranteeing} &&\centernot \implies t \text{ is 
		direct maintaining w.r.t $c$} &\text{ and} \\
		&t \text{ is maintaining w.r.t. $c$} &&\centernot \implies t \text{ is 
		$c$-guaranteeing} &\text{ } 
	\end{alignat*}
\end{lemma}
\begin{proof}
	\begin{enumerate}
		\item 
			Let $t$ be a c-guaranteeing transformation, then $H \models c$.
			It holds that $\nv{j}{H} = 0$ for all $0 \leq j < \nlvl(c)$ and 
			since the number of violations cannot be negative, $t$ is a 
			maintaining transformation w.r.t. $c$.
		
		\item 
			Let $t$ be a $c$-guaranteeing transformation. Then, $t$ is also
			a $c$-preserving transformation and since each direct maintaining
			transformation is also a maintaining one the statement follows 
			directly with Lemma \ref{comparision:maintaining_preserving}.
			
		\item 
			Consider the transformation $t: G \Longrightarrow H$ shown in Figure 
			\ref{fig:counterexamples_guaranteeing_maintaining} and constraint
			$c_1$ shown in Figure \ref{fig:constraints}.
			Then, $t$ is a maintaining transformation w.r.t $c$, in particular,
			$c$ is a consistency increasing transformation w.r.t. $c$ since 
			$\nv{0}{G} = 10$ and $\nv{0}{H} = 7$.
			But, $t$ is not $c$-guaranteeing since both occurrences 
			of nodes of type \emph{\texttt{Class}} do not satisfy $\exists 
			C_2^1$.
			
	\end{enumerate}
\end{proof}

\input{figures/fig_counterexamples_guaranteeing}

\begin{lemma}\label{comp_guaranteeing_minimal}
Let a constraint $c$ in UANF, graphs $G$ and $H$ with $G \not \models c$, and a transformation $t: G \Longrightarrow H$ be given. Then, 
\begin{alignat*}{3}
&t \text{ is $c$-guaranteeing } &&\implies t \text{ is increasing w.r.t $c$ } &\wedge \\
&t \text{ is $c$-guaranteeing } &&\centernot\implies t \text{ is direct increasing w.r.t $c$ } &\wedge \\
&t \text{ is increasing w.r.t $c$} &&\centernot \implies t \text{ is $c$-guaranteeing.} 
\end{alignat*}
\end{lemma}

\begin{proof}
\begin{enumerate}
 \item Let $t$ be a c-guaranteeing transformation, then $H \models c$. 
Since $G \not \models c$,  $\nv{\maxk{c}{G} + 1} {G} > 0$ and $\nv{\maxk{c}{G} + 1} {H} = 0$. Therefore, $t$ is consistency increasing. 

\item Let a constraint $c = \exists(a_0: \emptyset \inj C_1, \forall(a_1: C_1 \inj C_2, \exists(a_2:C_2 \inj C_3, \true)))$ and a graph $G = C' \dot{\cup} C'$ with $C' = C_3 \setminus \{e\}$ for one edge $e \in E_{C_3\setminus C_2}$ and the occurrences $p_1: C_3 \inj G$ and $p_2: C_2 \inj G$  be given. 
Let $t: G \Longrightarrow H$ be a transformation with $H = C_3 \dot{\cup} C''$ and $C'' = C' \setminus\{e'\}$ for an $e' \in E_{C_3 \setminus C_2}$, such that $\track_t \circ p_1$ and $\track_t \circ p_2$ are total. 
Then, $t$ is $c$-guaranteeing and not direct increasing, since $p_i \models \exists(a'_2:C_2 \inj C', \true)$  for $i = 1,2$ and either $\track_t \circ p_1 \not \models \exists(a'_2:C_2 \inj C', \true)$ or $\track_t \circ p_2 \not \models \exists(a'_2:C_2 \inj C', \true)$.

\item Let $t$ be a consistency increasing transformation w.r.t $c$, such that $\nv{\maxk{c}{G} + 1}{G}> \nv{\maxk{c}{G} + 1}{H} > 1$ and $H \not \models_{\maxk{c}{G} + 2} c$.
Then, $H \not \models c$ and $t$ is not a $c$-guaranteeing transformation. 
\end{enumerate}
\end{proof}

The definition of consistency improving only differs from guaranteeing if the corresponding constraint is universally bound and these notions are identical for existentially bound constraint. 
Therefore, with lemma \ref{comp_guaranteeing_minimal}, we can state the following.

\begin{corollary}\label{cor:comp_existentially}
Let $c$ be an existentially bound constraint in ANF. 
Then, 
\begin{alignat*}{2}
&t \text{ is consistency improving w.r.t $c$ } &&\implies t \text{ is consistency increasing w.r.t $c$ } \wedge\\
&t \text{ is consistency increasing w.r.t $c$} &&\centernot \implies t \text{ is consistency improving w.r.t $c$} 
\end{alignat*}

\end{corollary}

The notions of increasing and improving are equivalent for universally bound constraints with nesting level $1$. 
Note that, with corollary \ref{cor:comp_existentially}, this equivalence does not hold for existentially bound constraints with nesting level $1$.


\begin{lemma}
	let a universally bound constraint $c$ in UANF with $\nlvl(c) = 1$, a graph $G$  with $G \not \models c$ and a transformation $t: G \Longrightarrow H$ be given. 
	Then,
	$$t \text{ is consistency improving w.r.t $c$ } \iff t \text{ is consistency increasing w.r.t $c$}$$ 
	
\end{lemma}

\begin{proof}
Let $c = \forall(a: \emptyset \inj C, \false)$. 
Since $\scond{1}{c} = \false$, $\nv{1}{G}$ is the number of occurrences of $C$ in $G$. 
This is exactly the definition of the number of violations for consistency improving transformations and the statement follows immediately.
\end{proof}

For universally bound constraints $c$ with $\nlvl(c) \geq 2$, (direct) consistency increasing is not related to (direct) consistency improving and sustaining. 
As shown in \cite{kosiol2022sustaining}, (direct) consistency improving implies (direct) consistency sustaining. 
Therefore, it is sufficient to show that direct improving does not imply increasing and that direct increasing does not imply consistency sustainment. 

\begin{lemma}
Let a universally bound constraint $c$ in UANF with $\nlvl(c) \geq 2$, a graph $G$ with $G\not \models c$ and a transformation $t: G \Longrightarrow H$ be given. Then,
\begin{alignat*}{2}
&t \text{ is direct consistency improving w.r.t $c$ } &&\centernot \implies t \text{ is consistency increasing w.r.t $c$ } \wedge \\
&t \text{ is direct increasing w.r.t $c$ } &&\centernot \implies t \text{ is consistency sustaining w.r.t $c$ }
\end{alignat*}
\end{lemma}


\begin{proof}
\begin{enumerate}
\item Let $c = \forall(a_0: \emptyset \inj C_1, \exists(a_1: C_1 \inj C_2, \true))$ be a constraint.
Let $V_{C_1} = V_{C_2}$ and $|E_{C_2}| - |E_{C_1}| = 2$. Let $G = C' \dot \cup C'$ with $C' = C_2 \setminus \{e\}$ with $e \in E_{C_2}\setminus E_{C_1} $ and the occurrences $p_1: C_1 \inj G$ and $p_2: C_1 \inj G$ be given. It follows that $\nv{0}{G} = 2$.
Let $t: G \Longrightarrow H$ be a transformation, such that $H = C_1$. 
Then, $t$ is a direct consistency improving transformation, since $H$ contains only one occurrence of $C_1$ not satisfying $\exists(a_1:C_1 \inj C_2 \true)$. But, $t$ is not consistency increasing, since $\nv{0}{H} = 3$.

\item Let $c := \forall(a_0: \emptyset \inj C_1, \exists(a_1: C_1 \inj C_2, \forall(a_2: C_2 \inj C_3, \exists(a_3: C_3 \inj C_4, \true))))$ be a constraint.

Let a graph $G = C_1$ with the morphism $q: C_1 \inj G$ and a transformation $t: G \Longrightarrow H$ with $H := C_3 \dot{\cup} C_3$ be given, such that $\track_t \circ q$ is total. 
	Then $t$ is a direct consistency increasing transformation but not a consistency sustaining one, since $H$ contains more occurrences of $C_1$ not satisfying $\exists(a_1: C_1 \inj C_2, \forall(a_2: C_2 \inj C_3, \exists(a_3: C_3 \inj C_4, \true)))$ than $G$. 
\end{enumerate}
\end{proof}


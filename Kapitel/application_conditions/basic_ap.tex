\subsection{Application Conditions for Basic Rules}
Let us now introduce the application conditions for basic increasing rules.
Since basic rules are consistency-maintaining at a certain layer $k$ it suffices to check whether $m \circ i \exists(C_{k+3}, \true)$ if $\rho$ is a deleting rule, and whether $m \circ i \models \exists(C', \true)$ if $\rho$ is an inserting rule, where $m$ is the match of the transformation and $i$ is the increasing morphism of $\rho$.

\begin{definition}[\textbf{application conditions for basic increasing rules}]\label{def_basic_ap}
Given a constraint $c$ in UANF and a basic increasing rule  $\rho = (\ac,L \xhookleftarrow{l} K \xhookrightarrow{r} R)$ w.r.t. $c$ at layer $-1 \leq k\leq \nlvl(c)-2$, where $k$ is odd.
The \emph{basic application condition of $\rho$ w.r.t. $c$ at layer $-1 \leq j \leq \nlvl(c)-2$} is given by 
$$\ac' = \ac \wedge \apb{j}{\rho}$$
with 
$$\apb{j}{\rho} := \begin{cases}
						\bigwedge_{P \in \eol(L,a,i)} \neg \exists(i_L^P: L 								\inj P,\true) &\text{if j = k and $k < \nlvl(c) -2$} \\
						\true &\text{if $k = \nlvl(c)-2$} \\
						\false &\text{otherwise}
				   \end{cases}
$$
where $a= a_{k+2}$, if $\rho$ is a deleting rule, $a = a_{k+2}^r: C_{k+2} \inj C'$ if $\rho$ is an inserting rule with $C'$ and $i$ is the increasing morphism of $\rho$.
\end{definition}

These application conditions are much easier to construct and smaller than those constructed by Definition \ref{def_appl_cond}. 
Note that in the case of an inserting rule $\rho$ which inserts an intermediate graph $C$, the application condition only checks whether the increasing morphism does not satisfy $\exists(C, \true)$. But an application of this rule could also lead to a consistency increasing transformation w.r.t. $c$ if the increasing morphism satisfies $\exists(C, \true)$ and another intermediate graph $C'$ is inserted. To check this, conditions similar to those constructed via Definition \ref{def_appl_cond} must be constructed.
At first sight this seems like a restriction, but via the notion of derived rules we are able to dissolve this restriction, since the set of derived rules of $\rho$ will contain an inserting basic increasing rule with $C'$, so that this rule, equipped with the corresponding basic application condition, can be used to perform this consistency-increasing transformation. For example, consider the rule \texttt{assignFeature} and constraint $c_1$ given in Figure \ref{fig:constraints}, there is a consistency increasing transformation $t: C_2^2 \Longrightarrow_{\texttt{assignFeature},m} C_2^1$ such that $m \not \models \apb{-1}{\texttt{assignFeature}}$, but there is also a transformation $t: C_2^2 \Longrightarrow_{\texttt{assignFeature3},m'} C_2^1$ with 
$m' \models \apb{-1}{\texttt{assignFeature3}}$.

Let us now show that basic increasing rules equipped with the application condition constructed by Definition \ref{def_basic_ap} are indeed direct consistency increasing rules at layer.
\begin{theorem}
	Given a constraint $c$ in UANF and a basic increasing rule $\rho = (\ac, 
	\rle{L}{l}{K}{r}{R})$ w.r.t $c$ at layer $-1 \leq k \leq \nlvl(c)-2$, where $k$ is odd. 
	
	Then, $\rho' = (\ac \wedge \apb{k}{\rho}, \rle{L}{l}{K}{r}{R})$ is a direct 
	consistency increasing rule at layer $k$.
\end{theorem}

\begin{proof}
	Given a graph $G$ with $\kmax = k$. We show that each transformation 
	$t: G \Longrightarrow_{\rho', m}H$ is direct consistency increasing w.r.t. $c$.
	Since, $\rho'$ is a basic increasing rule at layer $k$, $\rho'$ is also a consistency maintaining transformation at layer $k$ and $t$ satisfies the deletion, inserting, universally and existentially conditions.
Therefore, we only need to show that $t$ satisfies the special increasing or general increasing condition respectively.
	\begin{enumerate}
		\item 
			If $\rho'$ is a deleting rule, $r \circ l^{-1} \circ i$ is not 
			total, where $i$ is the increasing morphism of $\rho'$. 
			If $k = \nlvl(c)-2$, the transformation satisfies
			the special increasing condition, since one occurrence of $C_{k+2}$ is removed.
			If $k < \nlvl(c)-2$, since $m \models \apb{k}{\rho}$, the morphism $m \circ i$ does not satisfy $\exists (C_{k+3}, \true)$. Since this occurrence is destroyed, $t$ satisfies the general increasing condition.
		\item
			If $\rho'$ is an inserting rule with $C' \in \ig{C_{k+2}}{C_{k+3}}$,
			then $k \leq \nlvl(c)-2$.
			The morphism $m \circ i$ does not satisfy $\exists(C', \true)$, since 
			$m \models \apb{k}{\rho}$. But it holds that $\track_t \circ m 
			\circ i \models \exists(C, \true)$ and therefore $t$ satisfies 
			the general increasing condition.  
	\end{enumerate}
	In summary, $\rho'$ is a basic direct consistency increasing rule at layer $k$ w.r.t. $c$.
\end{proof}



\begin{example}
	Again, consider the rule \emph{\texttt{assignFeature}}, its derived rule 
	\emph{\texttt{assignFeatur3}} and $c_1$.
	The application condition for these rules at layer $-1$ w.r.t. $c_1$ 
	is given in Figure  \ref{fig:example_basic_ap}.
\end{example}
\input{figures/fig_basic_example}